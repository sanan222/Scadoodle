<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scadoodle — AI Video Investigation</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
</head>
<body>

<!-- ══════════════════════════════════════════════════════════
     SCREEN 1 · UPLOAD
══════════════════════════════════════════════════════════ -->
<div id="upload-screen" class="screen active">
  <header class="upload-header">
    <div class="logo">
      <div class="logo-icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2" ry="2"/>
        </svg>
      </div>
      <span class="logo-text">Scadoodle</span>
    </div>
    <nav class="upload-nav">
      <a href="#" class="nav-link active">Dashboard</a>
      <a href="#" class="nav-link">Investigations</a>
      <a href="#" class="nav-link">Analytics</a>
      <a href="#" class="nav-link">Settings</a>
    </nav>
    <div class="header-actions">
      <div class="status-badge"><span class="status-dot"></span>AI Ready</div>
    </div>
  </header>
  <main class="upload-main">
    <div class="upload-hero">
      <h1 class="upload-title">AI Video Investigation</h1>
      <p class="upload-subtitle">Upload surveillance footage and search for objects, events, and activities using natural language.</p>
    </div>
    <input type="file" id="file-input" accept="video/*" multiple style="display:none" />
    <label class="upload-zone" id="drop-zone" for="file-input">
      <div class="upload-zone-inner">
        <div class="upload-icon-ring">
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
        </div>
        <h2 class="upload-zone-title">Drop videos here</h2>
        <p class="upload-zone-sub">or <span class="browse-link">browse files</span> from your computer</p>
        <div class="upload-formats">
          <span class="format-tag">MP4</span><span class="format-tag">MOV</span>
          <span class="format-tag">AVI</span><span class="format-tag">MKV</span><span class="format-tag">WEBM</span>
        </div>
      </div>
    </label>
    <div class="file-queue" id="file-queue" style="display:none">
      <div class="file-queue-header">
        <span class="file-queue-title">Queued Videos</span>
        <button class="btn-analyze" id="analyze-btn">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
          </svg>
          Start Investigation
        </button>
      </div>
      <ul class="file-list" id="file-list"></ul>
    </div>
    <div class="feature-grid">
      <div class="feature-card">
        <div class="feature-icon feature-icon--blue">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        </div>
        <h3 class="feature-title">Natural Language Search</h3>
        <p class="feature-desc">Ask anything — Gemini plans, Python executes.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon feature-icon--purple">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/></svg>
        </div>
        <h3 class="feature-title">Object &amp; Person Tracking</h3>
        <p class="feature-desc">YOLO + ByteTrack multi-object tracking.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon feature-icon--green">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
        </div>
        <h3 class="feature-title">Event Detection</h3>
        <p class="feature-desc">Temporal binary-search for exact frame events.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon feature-icon--orange">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
        </div>
        <h3 class="feature-title">Frame-by-Frame</h3>
        <p class="feature-desc">2-FPS extraction with click-to-inspect.</p>
      </div>
    </div>
  </main>
</div>

<!-- ══════════════════════════════════════════════════════════
     SCREEN 2 · INVESTIGATION
══════════════════════════════════════════════════════════ -->
<div id="investigation-screen" class="screen">

  <!-- Top bar (slim) -->
  <div class="inv-topbar">
    <div class="inv-topbar-left">
      <button class="topbar-btn" id="back-btn" title="Back">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
      </button>
      <div class="logo logo--sm">
        <div class="logo-icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2" ry="2"/></svg></div>
        <span class="logo-text">Scadoodle</span>
      </div>
      <span class="topbar-divider"></span>
      <span class="topbar-title" id="video-title">Investigation</span>
    </div>
    <div class="inv-topbar-right">
      <div class="status-badge"><span class="status-dot"></span>AI Ready</div>
    </div>
  </div>

  <!-- Main body: viewport + frame strip -->
  <div class="inv-body">

    <!-- Left: big viewport area -->
    <div class="viewport-col">

      <!-- Viewport (video OR frame) -->
      <div class="viewport" id="viewport">

        <!-- VIDEO layer -->
        <div class="vp-video-layer" id="vp-video-layer">
          <video id="main-video" preload="auto" muted playsinline></video>
          <div class="video-ph" id="video-ph">
            <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"><polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2" ry="2"/></svg>
            <span>Loading video…</span>
          </div>
        </div>

        <!-- FRAME layer (shown when a frame is selected) -->
        <div class="vp-frame-layer" id="vp-frame-layer" style="display:none">
          <img id="frame-img" alt="Frame" />
          <button class="back-to-video-btn" id="back-to-video" title="Back to video">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2" ry="2"/></svg>
            Back to video
          </button>
          <div class="frame-info-pill" id="frame-info-pill">
            <span id="frame-info-text">Frame #1 · 0:00</span>
          </div>
        </div>
      </div>

      <!-- Controls bar -->
      <div class="controls-bar">
        <button class="ctrl-btn" id="play-btn">
          <svg id="play-icon" width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg>
          <svg id="pause-icon" width="14" height="14" viewBox="0 0 24 24" fill="currentColor" style="display:none"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
        </button>
        <span class="ctrl-time" id="ctrl-time">0:00</span>
        <div class="timeline-track" id="timeline-track">
          <div class="timeline-fill" id="timeline-fill"></div>
          <div class="timeline-thumb" id="timeline-thumb"></div>
          <div class="tl-events" id="tl-events"></div>
        </div>
        <span class="ctrl-time" id="ctrl-duration">0:00</span>
        <button class="ctrl-btn" id="mute-btn" title="Mute">
          <svg id="vol-icon" width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></svg>
          <svg id="mute-icon" width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" y1="9" x2="17" y2="15"/><line x1="17" y1="9" x2="23" y2="15"/></svg>
        </button>
      </div>

      <!-- AI Chat input (bottom, chat-style) -->
      <div class="chat-input-area">
        <div class="chat-input-box" id="chat-input-box">
          <div class="chat-avatar">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
          </div>
          <input
            type="text"
            id="prompt-input"
            class="chat-text-input"
            placeholder="Describe what you're looking for…"
            autocomplete="off"
          />
          <span class="chat-model-tag">Gemini 2.5</span>
          <button class="chat-send-btn" id="prompt-send" title="Send">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
          </button>
        </div>
        <div class="chat-hint">Press Enter to send · AI analyzes your video and jumps to the result</div>
      </div>

      <!-- AI Result toast -->
      <div class="ai-toast" id="ai-toast" style="display:none">
        <div class="ai-toast-icon">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
        </div>
        <div class="ai-toast-body">
          <span class="ai-toast-label">AI Result</span>
          <span class="ai-toast-text" id="ai-toast-text"></span>
        </div>
        <span class="ai-toast-frame" id="ai-toast-frame"></span>
        <button class="ai-toast-close" id="ai-toast-close">✕</button>
      </div>
    </div>

    <!-- Right: frame strip -->
    <div class="strip-col" id="strip-col">
      <div class="strip-header">
        <span class="strip-label">Frames · 2 FPS</span>
        <span class="strip-count" id="strip-count">0</span>
      </div>
      <div class="capture-bar-wrap" id="capture-bar-wrap">
        <div class="capture-bar-track"><div class="capture-bar-fill" id="capture-bar-fill"></div></div>
        <span class="capture-status" id="capture-status">Waiting…</span>
      </div>
      <div class="frame-strip" id="frame-strip"></div>
    </div>

  </div>
</div>

<script src="app.js"></script>
</body>
</html>
